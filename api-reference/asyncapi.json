{
  "asyncapi": "3.0.0",
  "info": {
    "title": "CoinGecko WebSocket API - Minimal",
    "version": "1.0.0",
    "description": "Minimal test config for StreamRequestMessage"
  },
  "servers": {
    "production": {
      "host": "stream.coingecko.com",
      "protocol": "wss",
      "pathname": "/v1",
      "description": "Production WebSocket server",
      "security": [
        {
          "$ref": "#/components/securitySchemes/cgApiKey"
        }
      ]
    }
  },
  "channels": {
    "root": {
      "address": "/v1",
      "messages": {
        "streamRequest": {
          "$ref": "#/components/messages/StreamRequestMessage"
        }
      }
    }
  },
  "operations": {
    "requestPriceStream": {
      "action": "receive",
      "channel": {
        "$ref": "#/channels/root"
      },
      "title": "Request Price Stream",
      "summary": "Set tokens to stream",
      "messages": [
        {
          "$ref": "#/channels/root/messages/streamRequest"
        }
      ]
    }
  },
  "components": {
    "securitySchemes": {
      "cgApiKey": {
        "type": "httpApiKey",
        "in": "query",
        "name": "x_cg_pro_api_key",
        "description": "CoinGecko Pro API key sent as a query parameter"
      }
    },
    "messages": {
      "StreamRequestMessage": {
        "name": "StreamRequest",
        "title": "Request Price Stream",
        "summary": "Set tokens to receive price updates",
        "payload": {
          "type": "object",
          "properties": {
            "command": {
              "type": "string",
              "enum": [
                "message"
              ],
              "default": "message",
              "example": "message",
              "description": "Command to send a message (pre-filled)"
            },
            "identifier": {
              "type": "string",
              "default": "{\"channel\":\"CGSimplePrice\"}",
              "example": "{\"channel\":\"CGSimplePrice\"}",
              "description": "Channel identifier (pre-filled - don't change)"
            },
            "data": {
              "type": "string",
              "default": "{\"coin_id\":[\"bitcoin\"],\"action\":\"set_tokens\"}",
              "example": "{\"coin_id\":[\"bitcoin\"],\"action\":\"set_tokens\"}",
              "description": "EDIT THIS: Change the coin_id array. Examples: [\"bitcoin\"] or [\"bitcoin\",\"ethereum\"] or [\"bitcoin\",\"ethereum\",\"cardano\"]"
            },
            "nested": {
              "type": "object",
              "properties": {
                "favoriteColor": {
                  "type": "string",
                  "default": "blue"
                },
                "favoriteDog": {
                  "type": "string"
                }
              }
            }
          },
          "required": [
            "command",
            "identifier",
            "data"
          ]
        }
      }
    }
  }
}